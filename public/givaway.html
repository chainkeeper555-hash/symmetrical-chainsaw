<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://unpkg.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
        style-src 'self' 'unsafe-inline' https://unpkg.com https://fonts.googleapis.com https://fonts.gstatic.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: https://sh4nerewards.com https://res.cloudinary.com;
        connect-src 'self' https://sh4nerewards.com https://cdn.jsdelivr.net https://kick.com https://bcgame.st https://api.cloudinary.com;
        frame-src 'self' https://www.youtube.com https://youtube.com https://youtu.be https://www.youtube-nocookie.com https://player.vimeo.com https://www.kick.com;
        media-src 'self' sound/;
    ">
    <title>SH4NER | S4R - Giveaway</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.1.0/chartjs-plugin-datalabels.min.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/giveaway.css">
    <style>
        /* Body Padding to Prevent Footer Overlap */
        @media (max-width: 640px) {
            body {
                padding-bottom: 3.5rem; /* Height of bottom-nav (3rem) + buffer */
            }
        }

        /* Bottom Navigation (Mobile Only) */
        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 100%;
            margin: 0 auto;
            background: rgba(0, 14, 15, 0.407);
            backdrop-filter: blur(10px);
            z-index: 900;
            padding: 0.5rem 0;
        }

        @media (max-width: 640px) {
            .bottom-nav {
                display: flex;
                justify-content: space-around;
                align-items: center;
            }
            .bottom-nav a {
                display: flex;
                flex-direction: column;
                align-items: center;
                color: #dfefff;
                font-size: 0.625rem;
                font-weight: 600;
                text-transform: uppercase;
                padding: 0.125rem 0.5rem;
                transition: color 0.2s, background 0.2s;
                width: 20%;
                min-width: 60px;
            }
            .bottom-nav a:hover {
                color: #ffffff;
            }
            .bottom-nav a.nav-active {
                color: #ffffff;
                background: #72F4FF;
            }
            .bottom-nav a.nav-active i {
                color: #ffffff;
            }
            .bottom-nav a i {
                width: 1.5rem;
                height: 1.5rem;
                margin-bottom: 0.25rem;
                color: #dfefff;
                transition: color 0.2s;
            }
        }

        /* Floating Kick Button (Mobile Only) */
        .floating-kick-button {
            display: none;
            position: fixed;
            bottom: 4.5rem;
            right: 1rem;
            background: #6addc24d;
            color: #ffffff;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            z-index: 950;
            transition: transform 0.2s, opacity 0.3s, visibility 0.3s;
        }

        .floating-kick-button.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .floating-kick-button:hover {
            transform: scale(1.05);
        }

        /* Floating Help Button (Mobile Only) */
        .floating-help-button {
            display: none;
            position: fixed;
            bottom: 7.5rem; /* Above Kick button */
            right: 1rem;
            background: #6addc24d;
            color: #ffffff;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            z-index: 950;
            transition: transform 0.2s, opacity 0.3s, visibility 0.3s;
        }

        .floating-help-button.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .floating-help-button:hover {
            transform: scale(1.05);
        }

        @media (max-width: 640px) {
            .floating-kick-button,
            .floating-help-button {
                display: block;
                font-size: 0.6rem;
                padding: 0.25rem 0.5rem;
            }
        }

        /* Wheel Mobile Responsiveness */
        @media (max-width: 640px) {
            .spin-container-outer {
                padding: 1em !important;
                max-width: 95vw;
            }
            
            .wheel-container {
                width: 280px !important;
                height: 280px !important;
                margin: 0 auto;
            }
            
            img[alt="spinner arrow"] {
                width: 3em;
                top: -10%;
            }
            
            #spin-btn {
                width: 90px;
                height: 45px;
                font-size: 1em;
            }
            
            .rewards-section {
                padding: 1rem !important;
                margin-top: 2rem;
            }
            
            .rewards-section h2 {
                font-size: 1.5rem !important;
            }
            
            .rewards-section p {
                font-size: 0.9rem;
                line-height: 1.4;
            }
            
            #email-modal .modal-content {
                width: 90%;
                max-width: 400px;
            }
        }

        .wheel-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 100%;
            border: 2px solid transparent;
            background: linear-gradient(0deg, #FFFB90 -22.88%, #FBE978 -6.61%, #F8DC65 5.02%, #E6C758 8.5%, #C49F40 16.64%, #AC832F 23.61%, #9E7225 29.43%, #996C22 34.07%, #9D7125 37.56%, #A98030 42.21%, #BD9A42 46.86%, #D9BE5A 51.51%, #FBE878 57.32%, #FFFFAA 66.62%, #FBE878 73.59%, #A4631B 93.35%) border-box;
            border-radius: 50%;
            overflow: hidden;
            box-sizing: border-box;
        }

        .wheel-container canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: transparent;
            z-index: 1;
        }

        .small-blue-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(225deg, #0E5DF8, #0F26A2, #10249F);
            border-radius: 50%;
            z-index: 5;
        }

        img[alt="spinner arrow"] {
            position: absolute;
            width: 4em;
            top: -8%;
            left: 50%;
            transform-origin: 50% 100%;
            transform: translateX(-50%);
            transition: transform 0.6s ease-in-out;
            z-index: 10;
        }

        @keyframes vibrate {
            0% { transform: translateX(-50%) rotate(-15deg); }
            20% { transform: translateX(-50%) rotate(-17deg); }
            40% { transform: translateX(-50%) rotate(-13deg); }
            60% { transform: translateX(-50%) rotate(-17deg); }
            80% { transform: translateX(-50%) rotate(-13deg); }
            100% { transform: translateX(-50%) rotate(-15deg); }
        }

        .vibrate {
            animation: vibrate 0.5s ease-in-out;
        }

        .spin-button-container {
            text-align: center;
            margin-top: 1em;
        }

        #spin-btn {
            cursor: pointer;
            border: 2px solid #FFD700;
            background: linear-gradient(270deg, #0E5DF8 -3.89%, #0E4DE0 28.42%, #0F26A2 96.19%, #10249F 100.36%);
            color: #FFFFFF;
            text-transform: uppercase;
            font-size: 1.2em;
            letter-spacing: 0.1em;
            font-weight: 600;
            padding: 0;
            width: 100px;
            height: 50px;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .spinner.active {
            display: inline-block;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #email-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #email-modal .modal-content {
            background: rgba(3, 16, 22, 0.9);
            border-radius: 1rem;
            padding: 2rem;
            width: 100%;
            max-width: 500px;
            position: relative;
            font-family: 'Poppins', sans-serif;
            color: #FFFFFF;
        }

        #email-modal .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #FFFFFF;
            background: none;
            border: none;
        }

        #email-modal input[type="email"] {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 1rem;
            border: 1px solid #6B7280;
            border-radius: 0.5rem;
            background: rgba(3, 16, 22, 0.8);
            color: #FFFFFF;
            font-family: 'Poppins', sans-serif;
        }

        #email-modal input[type="email"]::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        #email-modal button[type="submit"] {
            background: linear-gradient(270deg, #0E5DF8, #0F26A2);
            border: 2px solid #FFD700;
            color: #FFFFFF;
            font-weight: 600;
            text-transform: uppercase;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>

   
   <header class="header fixed z-50">
    <div class="w-full px-4 sm:px-6 lg:px-8 h-full flex items-center justify-between"> <!-- Changed: removed max-w-7xl mx-auto for full width -->
        <div class="flex items-center w-1/3 left-icons">
           <nav class="flex space-x-2 sm:space-x-4">
    <a href="index.html" class="text-[#dfefff]/95 uppercase font-semibold text-xs sm:text-sm tracking-wide">Home</a>
    <a href="leaderboard.html" class="text-[#dfefff]/95 uppercase font-semibold text-xs sm:text-sm tracking-wide">Leadboard</a>
    <a href="game.html" class="text-[#dfefff]/95 uppercase font-semibold text-xs sm:text-sm tracking-wide">Gameplay</a>
    <a href="givaway.html" class="text-[#dfefff]/95 uppercase font-semibold text-xs sm:text-sm tracking-wide nav-active">Giveaway</a>
    <a href="help.html" class="text-[#dfefff]/95 uppercase font-semibold text-xs sm:text-sm tracking-wide">Help</a>
</nav>
        </div>
        <div class="flex justify-center w-1/3 logo-container">
            <img src="/img/Sh4ner_White 1.png" alt="Logo" class="h-8 sm:h-10 rounded-full object-cover">
        </div>
       <div class="flex items-center space-x-1 sm:space-x-2 w-1/3 justify-end right-icons">
    <a href="https://x.com/sh4ne_r?t=3Uet8-mY59EnhAzmaig5Hw&s=09" target="_blank" aria-label="X" class="feather-icon">
        <svg class="text-white w-6 h-6 sm:w-8 sm:h-8" viewBox="0 0 48 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M 5.9199219 6 L 20.582031 27.375 L 6.2304688 44 L 9.4101562 44 L 21.986328 29.421875 L 31.986328 44 L 44 44 L 28.681641 21.669922 L 42.199219 6 L 39.029297 6 L 27.275391 19.617188 L 17.933594 6 L 5.9199219 6 z M 9.7167969 8 L 16.880859 8 L 40.203125 42 L 33.039062 42 L 9.7167969 8 z"></path>
        </svg>
    </a>
    <span class="icon-fallback">X</span>

    <a href="https://youtube.com/@sh4neryt?si=mW-9I4vw14vgCbC_" target="_blank" aria-label="YouTube" class="feather-icon">
        <i data-feather="youtube" class="text-white w-6 h-6 sm:w-8 sm:h-8"></i>
    </a>
    <span class="icon-fallback">YT</span>

    <a href="https://www.instagram.com/s4r.clips?igsh=Z3pyM3hua21qNmI5" target="_blank" aria-label="Instagram" class="feather-icon">
        <i data-feather="instagram" class="text-white w-6 h-6 sm:w-8 sm:h-8"></i>
    </a>
    <span class="icon-fallback">IG</span>

    <a href="https://t.me/SH4NERLOBBY" target="_blank" aria-label="Telegram" class="feather-icon">
        <i data-feather="send" class="text-white w-6 h-6 sm:w-8 sm:h-8"></i>
    </a>
    <span class="icon-fallback">TG</span>

    <a href="https://kick.com/sh4ne_r" target="_blank" class="cta-button flex items-center uppercase font-bold tracking-wider">
        Follow on Kick!
    </a>
</div>

    </div>
</header>
    <!-- Giveaway Section -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 sm:pt-32 pb-12 sm:pb-16 relative">
        <h2 class="social-heading">S4R | BC Game Magic Wheel Giveaway</h2>
        <div class="flex flex-col lg:flex-row lg:gap-8">
            <section class="spin-section max-w-3xl mx-auto lg:w-1/2" style="background: transparent;">
                <div class="spin-container-outer" style="width: 100%; max-width: 39.5255em; max-height: 90vh; position: relative; padding: 3em; border-radius: 1em;">
                    <div class="spin-container-wrapper" style="position: relative; width: 100%; height: 100%;">
                        <div style="background: linear-gradient(270deg, #0E5DF8 -3.89%, #0E4DE0 28.42%, #0F26A2 96.19%, #10249F 100.36%); padding: 16px; border-radius: 50%; width: 100%; height: 100%; box-sizing: border-box;">
                            <div class="wheel-container">
                                <canvas id="wheel" aria-label="Prize wheel"></canvas>
                                <div class="small-blue-circle"></div>
                            </div>
                        </div>
                        <img src="/img/pngtree-the-gold-arrow-png-image-png-image_10276849-removebg-preview.png" alt="spinner arrow" />
                    </div>
                    <div class="spin-button-container">
                        <button id="spin-btn" aria-label="Spin the wheel to win a prize">
                            Spin <span class="spinner" aria-hidden="true"></span>
                        </button>
                    </div>
                    <div id="final-value" aria-live="polite" style="font-size: 1.5em; text-align: center; margin-top: 1.5em; color: var(--muted-white); font-weight: 500;">
                        <p>Click On The Spin Button To Start</p>
                    </div>
                </div>
                <div id="email-modal">
                    <div class="modal-content">
                        <button class="modal-close" aria-label="Close modal">&times;</button>
                        <h2 class="text-2xl font-bold text-center mb-4">Enter Your Email</h2>
                        <form id="email-form">
                            <input type="email" id="user-email" placeholder="Your Email" required class="w-full">
                            <button type="submit" class="mt-4">Submit</button>
                        </form>
                    </div>
                </div>
            </section>
            <section class="rewards-section rounded-2xl p-6 sm:p-8 max-w-3xl mx-auto lg:w-1/2" style="background: transparent;">
                <h2 class="text-3xl sm:text-4xl font-bold text-left text-green-500 mb-4">Rewards</h2>
                <p class="text-[var(--muted-white)] text-sm font-normal leading-relaxed text-left">
                    We have teamed up with BC Game to do a bonus wheel giveaway. This month, deposit $20 at BC Game and be in the chance to win one of the following prizes: <br>
                    5x €200 in Amazon Vouchers (Drawn Each Month) <br>
                    6 x spins per BC Game stream. On the wheel to win a cash prize straight to your account including ($10, $18, $30, $40, $60, $150, $200, $250, $300, $350)
                </p>
                <h2 class="text-3xl sm:text-4xl font-bold text-left text-[#FF0000] mb-4">Rules</h2>
                <p class="text-[var(--muted-white)] text-sm font-normal leading-relaxed text-left">
                    To Enter, Deposit $20 on BC Game, Enter the form to the right and you could win. You must fill in the form to the right in full to have a valid entry into the competition.
                </p>
                <h2 class="text-3xl sm:text-4xl font-bold text-left text-[var(--text-white)] mb-4">Sign up to BC game</h2>
                <ul class="mt-4 text-[var(--muted-white)] signup-list list-disc">
                    <li>By entering the competition you are also agreeing to add your email address to our mailing list so we can reach out in the future with more amazing offers and deals.</li>
                </ul>
                <div class="mt-6 button-container flex justify-start gap-4 sm:gap-6">
                    <a href="https://bcgame.st/?i=sh4ner&utm_source=sh4ner" class="cta-button inline-flex items-center justify-center">
                        Sign up to play
                    </a>
                    <a href="https://bcgame.st/?i=sh4ner&utm_source=sh4ner" class="cta-button-transparent inline-flex items-center justify-center">
                        Go to bc.game
                    </a>
                </div>
            </section>
        </div>
    </main>

    <!-- Contact Section -->
    <section class="contact-section" aria-labelledby="contact-heading">
        <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
            <div class="h-divider">
                <div class="shadow"></div>
            </div>
            <h2 id="contact-heading" class="social-heading">Contact S4R Team</h2>
            <form id="contactForm" class="max-w-3xl mx-auto" data-aos="fade-up">
                <p class="text-center text-[16px] sm:text-[18px] text-white font-['Poppins'] mb-8">Join the S4R giveaway by submitting your details below!</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                    <div>
                        <input type="text" id="firstName" name="firstName" placeholder="First Name" class="w-full p-3 rounded-lg bg-[rgba(3,16,22,0.8)] border border-gray-500 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-gray-500" required>
                    </div>
                    <div>
                        <input type="text" id="lastName" name="lastName" placeholder="Last Name" class="w-full p-3 rounded-lg bg-[rgba(3,16,22,0.8)] border border-gray-500 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-gray-500" required>
                    </div>
                </div>
                <div class="mb-4">
                    <input type="email" id="email" name="email" placeholder="Email" class="w-full p-3 rounded-lg bg-[rgba(3,16,22,0.8)] border border-gray-500 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-gray-500" required>
                </div>
                <div class="mb-4">
                    <input type="tel" id="phone" name="phone" placeholder="Phone Number" class="w-full p-3 rounded-lg bg-[rgba(3,16,22,0.8)] border border-gray-500 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-gray-500">
                </div>
                <div class="mb-4">
                    <textarea id="message" name="message" rows="5" placeholder="Message" class="w-full p-3 rounded-lg bg-[rgba(3,16,22,0.8)] border border-gray-500 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:ring-2 focus:ring-gray-500" required>
                    </textarea>
                </div>
                <div class="text-center">
                    <button type="submit" class="w-full primary-cta rounded-xl uppercase font-bold text-sm sm:text-base">Enter Giveaway</button>
                </div>
            </form>
        </div>
    </section>

    <!-- Bottom Navigation (Mobile Only) -->
    <nav class="bottom-nav">
        <a href="index.html"><i data-feather="home"></i>Home</a>
        <a href="leaderboard.html"><i data-feather="award"></i>Leadboard</a>
        <a href="game.html"><i data-feather="play-circle"></i>Gameplay</a>
        <a href="givaway.html" class="nav-active"><i data-feather="gift"></i>Giveaway</a>
    </nav>

    <!-- Floating Kick Button (Mobile Only) -->
    <button class="floating-kick-button">Follow on Kick!</button>

    <!-- Floating Help Button (Mobile Only) -->
    <a href="#" class="floating-help-button">Help</a>

    <!-- Footer -->
    <footer class="footer">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
            <div class="h-divider">
                <div class="shadow"></div>
            </div>
            <h2 class="text-[#FFFF00] font-bold text-[48px] text-center font-['Poppins']">Disclaimer</h2>
            <p class="text-[16px] text-center font-['Poppins'] font-normal mt-4 max-w-2xl mx-auto disclaimer-text">
                sh4ner.com is an independent igaming news site and casino comparison service. Every effort is made to ensure that the bonus offers listed here are accurate and up-to-date. However, we accept no responsibility for inaccuracies or errors. Please check terms and conditions before deciding to take a bonus.
            </p>
            <h1 class="text-[#FF0000] font-bold text-[48px] text-center font-['Poppins'] mt-8">Gamble Responsibly</h1>
            <p class="text-[16px] text-center font-['Poppins'] font-normal mt-4 max-w-2xl mx-auto gamble-text">
                Please gamble responsibly. Gambling can have a serious impact on your life. Only gamble with money you can afford to lose.
            </p>
            <div class="footer-logo-container">
                <!-- Replace with Cloudinary URLs or local placeholder images -->
                <img src="https://res.cloudinary.com/your-cloud-name/image/upload/v1/streamerpulse/logo1.png" alt="Logo 1" class="footer-logo">
                <img src="https://res.cloudinary.com/your-cloud-name/image/upload/v1/streamerpulse/logo2.png" alt="Logo 2" class="footer-logo">
                <img src="https://res.cloudinary.com/your-cloud-name/image/upload/v1/streamerpulse/logo3.png" alt="Logo 3" class="footer-logo">
                <img src="https://res.cloudinary.com/your-cloud-name/image/upload/v1/streamerpulse/logo4.png" alt="Logo 4" class="footer-logo">
            </div>
            <p class="text-[12px] text-center font-['Poppins'] font-normal mt-4">
                © 2024 SH4NE_R. All rights reserved. 
                <a href="#" class="underline">Privacy Policy</a> | 
                <a href="#" class="underline">Terms of Service</a>
            </p>
        </div>
    </footer>

    <audio id="spin-sound" src="sound/wheel-spin-click-slow-down-101152.mp3" preload="auto"></audio>
    <audio id="stop-sound" src="sound/sonar-ping-95840.mp3" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('DOM loaded, initializing scripts');
            try {
                feather.replace();
                console.log('Feather Icons initialized');
            } catch (e) {
                console.error('Feather Icons failed to load:', e);
                document.querySelectorAll('.feather-icon').forEach(function(el) {
                    el.classList.add('empty');
                });
            }
            AOS.init();

            // Scroll Handling for Floating Kick and Help Buttons
            let lastScrollTop = 0;
            let scrollTimeout = null;
            const kickButton = document.querySelector('.floating-kick-button');
            const helpButton = document.querySelector('.floating-help-button');

            function throttle(func, wait) {
                let timeout = null;
                return function() {
                    if (!timeout) {
                        timeout = setTimeout(() => {
                            func.apply(this, arguments);
                            timeout = null;
                        }, wait);
                    }
                };
            }

            const handleScroll = throttle(() => {
                let currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (currentScrollTop > lastScrollTop) {
                    // Scrolling down
                    kickButton.classList.add('hidden');
                    helpButton.classList.add('hidden');
                } else {
                    // Scrolling up
                    kickButton.classList.remove('hidden');
                    helpButton.classList.remove('hidden');
                }
                lastScrollTop = currentScrollTop <= 0 ? 0 : currentScrollTop;

                // Show buttons when scrolling stops
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    kickButton.classList.remove('hidden');
                    helpButton.classList.remove('hidden');
                }, 150);
            }, 100);

            window.addEventListener('scroll', handleScroll);

            // Wheel Initialization
            const wheel = document.getElementById("wheel");
            const spinBtn = document.getElementById("spin-btn");
            const finalValue = document.getElementById("final-value");
            const spinSound = document.getElementById("spin-sound");
            const stopSound = document.getElementById("stop-sound");
            const arrow = document.querySelector('img[alt="spinner arrow"]');
            const emailModal = document.getElementById("email-modal");
            const emailForm = document.getElementById("email-form");
            const userEmailInput = document.getElementById("user-email");
            const modalClose = document.querySelector(".modal-close");

            async function initializeWheel() {
                // Check if Chart.js and canvas are supported
                if (!window.Chart || !wheel || !wheel.getContext('2d')) {
                    console.error('Canvas context or Chart.js not supported');
                    finalValue.innerHTML = `<p>Error: This browser does not support the prize wheel feature. Please try a different browser or update your current one.</p>`;
                    spinBtn.disabled = true;
                    return;
                }

                let defaultPrizes = [
                    { minDegree: 0, maxDegree: 30, value: "$0" },
                    { minDegree: 31, maxDegree: 60, value: "$10" },
                    { minDegree: 61, maxDegree: 90, value: "ZERO" },
                    { minDegree: 91, maxDegree: 120, value: "$2" },
                    { minDegree: 121, maxDegree: 150, value: "$50" },
                    { minDegree: 151, maxDegree: 180, value: "$3" },
                    { minDegree: 181, maxDegree: 210, value: "$5" },
                    { minDegree: 211, maxDegree: 240, value: "$20" },
                    { minDegree: 241, maxDegree: 270, value: "JACKPOT" },
                    { minDegree: 271, maxDegree: 300, value: "$15" },
                    { minDegree: 301, maxDegree: 330, value: "$100" },
                    { minDegree: 331, maxDegree: 360, value: "$1" }
                ];
                let rotationValues = defaultPrizes;
                let labels = defaultPrizes.map(p => p.value);

                const data = Array(12).fill(16);
                let oldpick = [];
                let rotation = 0;
                let oldrotation = 0;

                try {
                    let myChart = new Chart(wheel, {
                        plugins: [ChartDataLabels],
                        type: "pie",
                        data: {
                            labels: labels,
                            datasets: [{
                                backgroundColor: (context) => {
                                    const chart = context.chart;
                                    const { ctx, chartArea } = chart;
                                    if (!chartArea) return;
                                    const index = context.dataIndex;
                                    if (index % 2 === 0) return "#FFFFFF";
                                    const centerX = (chartArea.left + chartArea.right) / 2;
                                    const centerY = (chartArea.top + chartArea.bottom) / 2;
                                    const radius = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top) / 2;
                                    const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                                    switch (index) {
                                        case 1: gradient.addColorStop(0, "rgba(32, 105, 255, 1)"); gradient.addColorStop(1, "rgba(80, 219, 255, 1)"); break;
                                        case 3: gradient.addColorStop(0, "rgba(32, 105, 255, 1)"); gradient.addColorStop(0.7, "rgba(80, 219, 255, 1)"); break;
                                        case 5: gradient.addColorStop(0, "rgba(32, 105, 255, 1)"); gradient.addColorStop(0.4, "rgba(80, 219, 255, 1)"); break;
                                        case 7: gradient.addColorStop(0, "rgba(32, 105, 255, 1)"); gradient.addColorStop(0.6, "rgba(80, 219, 255, 1)"); break;
                                        case 9: gradient.addColorStop(0, "rgba(32, 105, 255, 1)"); gradient.addColorStop(0.8, "rgba(80, 219, 255, 1)"); break;
                                        case 11: gradient.addColorStop(0, "rgba(32, 105, 255, 1)"); gradient.addColorStop(0.5, "rgba(80, 219, 255, 1)"); break;
                                    }
                                    return gradient;
                                },
                                data: data
                            }]
                        },
                        options: {
                            responsive: true,
                            animation: { duration: 0 },
                            plugins: {
                                tooltip: false,
                                legend: { display: false },
                                datalabels: {
                                    color: (context) => {
                                        const chart = context.chart;
                                        const { ctx, chartArea } = chart;
                                        if (!chartArea) return;
                                        const index = context.dataIndex;
                                        if ([0, 2, 4].includes(index)) {
                                            const gradient = ctx.createLinearGradient(chartArea.left, chartArea.top, chartArea.right, chartArea.bottom);
                                            gradient.addColorStop(0, "rgba(145, 92, 191, 1)");
                                            gradient.addColorStop(0.5, "rgba(255, 81, 131, 1)");
                                            gradient.addColorStop(1, "rgba(32, 105, 255, 1)");
                                            return gradient;
                                        }
                                        if (index % 2 === 0) {
                                            const gradient = ctx.createLinearGradient(chartArea.left, chartArea.top, chartArea.right, chartArea.bottom);
                                            gradient.addColorStop(0.0945, "#50DBFF");
                                            gradient.addColorStop(0.9182, "#2069FF");
                                            gradient.addColorStop(0.9182, "#915CBF");
                                            gradient.addColorStop(0.9182, "#FF5183");
                                            return gradient;
                                        }
                                        return "#FFFFFF";
                                    },
                                    formatter: (_, context) => context.chart.data.labels[context.dataIndex],
                                    font: { size: 16, family: 'Poppins', weight: 'bold' },
                                    textShadow: "2px 2px 2px #000000"
                                }
                            }
                        }
                    });

                    async function saveSpinResult(email, prize) {
                        try {
                            const response = await fetch('https://sh4nerewards.com/api/giveaway/spin-result', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ email, prize })
                            });
                            let result = {};
                            try {
                                result = await response.json();
                            } catch (e) {
                                console.warn('Non-JSON response received:', response.statusText);
                            }
                            if (response.ok) {
                                console.log('Spin result saved:', result);
                            } else {
                                console.error('Error saving spin result:', result.message || result.error || response.statusText || 'Unknown error');
                                alert(`Failed to save spin result: ${result.message || result.error || response.statusText || 'Server not found. Please try again.'}`);
                            }
                        } catch (error) {
                            console.error('Error saving spin result:', error.message);
                            alert('An error occurred while saving your spin result. Please check your connection.');
                        }
                    }

                    function spin(email) {
                        if (oldpick.length === rotationValues.length) {
                            finalValue.innerHTML = `<p>All values have been picked! Resetting...</p>`;
                            oldpick = [];
                            oldrotation = 0;
                            myChart.options.rotation = 0;
                            arrow.style.transform = 'translateX(-50%)';
                            arrow.classList.remove('vibrate');
                            myChart.update();
                            setTimeout(() => {
                                finalValue.innerHTML = `<p>Click On The Spin Button To Start</p>`;
                                spinBtn.disabled = false;
                                spinBtn.querySelector('.spinner').classList.remove('active');
                            }, 2000);
                            return;
                        }

                        spinBtn.disabled = true;
                        spinBtn.querySelector('.spinner').classList.add('active');
                        finalValue.innerHTML = `<p>Good Luck!</p>`;
                        spinSound.currentTime = 0;
                        spinSound.play().catch(e => console.log("Spin sound error:", e));
                        arrow.style.transform = 'translateX(-50%)';
                        arrow.classList.remove('vibrate');
                        const ps = 360 / rotationValues.length;
                        const rng = Math.floor((Math.random() * 1440) + 360);
                        rotation = Math.round(rng / ps) * ps;
                        let picked = Math.round(rotationValues.length - (rotation % 360) / ps);
                        picked = picked >= rotationValues.length ? (picked % rotationValues.length) : picked;

                        if (oldpick.includes(picked)) {
                            spin(email);
                            return;
                        } else {
                            oldpick.push(picked);
                        }

                        rotation += 90 - Math.round(ps / 1);
                        let currentRotation = oldrotation % 360;
                        const targetRotation = rotation;
                        const duration = 5000;
                        const startTime = performance.now();

                        function animateSpin(time) {
                            const elapsed = time - startTime;
                            const progress = Math.min(elapsed / duration, 1);
                            const easedProgress = 1 - Math.pow(1 - progress, 3);
                            myChart.options.rotation = (currentRotation + (targetRotation - currentRotation) * easedProgress) % 360;
                            myChart.update();

                            if (progress < 1) {
                                requestAnimationFrame(animateSpin);
                            } else {
                                myChart.options.rotation = rotation;
                                myChart.update();
                                const normalizedAngle = (rotation % 360 + 360) % 360;
                                const selectedIndex = Math.round(rotationValues.length - (normalizedAngle % 360) / ps);
                                const finalIndex = selectedIndex >= rotationValues.length ? (selectedIndex % rotationValues.length) : selectedIndex;
                                const prize = rotationValues[finalIndex].value;
                                finalValue.innerHTML = `<p>You won: ${prize}! Deposit $20 at BC Game to claim your reward.</p>`;
                                arrow.style.transform = `translateX(-50%) rotate(-15deg)`;
                                arrow.classList.add('vibrate');
                                spinSound.pause();
                                spinSound.currentTime = 0;
                                stopSound.currentTime = 0;
                                stopSound.play().catch(e => console.log("Stop sound error:", e));
                                oldrotation = rotation;
                                spinBtn.disabled = false;
                                spinBtn.querySelector('.spinner').classList.remove('active');
                                if (email) {
                                    saveSpinResult(email, prize);
                                }
                            }
                        }

                        requestAnimationFrame(animateSpin);
                    }

                    spinBtn.addEventListener("click", () => {
                        emailModal.style.display = 'flex';
                    });

                    emailForm.addEventListener("submit", (e) => {
                        e.preventDefault();
                        const email = userEmailInput.value.trim();
                        if (!/^\S+@\S+\.\S+$/.test(email)) {
                            alert('Please enter a valid email address.');
                            return;
                        }
                        emailModal.style.display = 'none';
                        userEmailInput.value = '';
                        spin(email);
                    });

                    modalClose.addEventListener("click", () => {
                        emailModal.style.display = 'none';
                        userEmailInput.value = '';
                    });
                } catch (e) {
                    console.error('Error initializing Chart.js:', e);
                    finalValue.innerHTML = `<p>Error: Failed to initialize prize wheel. Please try refreshing the page or using a different browser.</p>`;
                    spinBtn.disabled = true;
                }
            }

            // Contact Form Submission
            const contactForm = document.getElementById('contactForm');
            if (contactForm) {
                contactForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const formData = {
                        firstName: document.getElementById('firstName').value,
                        lastName: document.getElementById('lastName').value,
                        email: document.getElementById('email').value,
                        phone: document.getElementById('phone').value,
                        message: document.getElementById('message').value
                    };
                    try {
                        const response = await fetch('https://sh4nerewards.com/api/contact', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(formData)
                        });
                        const result = await response.json();
                        if (response.ok) {
                            alert('Entry submitted successfully!');
                            contactForm.reset();
                        } else {
                            alert('Error: ' + (result.message || result.error || 'Unknown error'));
                        }
                    } catch (error) {
                        console.error('Error submitting form:', error);
                        alert('An error occurred. Please try again later.');
                    }
                });
            }

            // Initialize
            await initializeWheel();
        });
    </script>
</body>
</html>

